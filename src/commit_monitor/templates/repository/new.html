{% extends "base/base.html" %}
{% block title%}New{% endblock %}
{% block body %}

	{% if state %}
		<h1>New repository page</h1>
		<form method="POST">

			<div class="form-group">
    			<label for="user">User token</label>
    			<input type="text" class="form-control"
					   id="user" name="user"
					   placeholder="Enter token generated from github">
  			</div>

			<div class="form-group">
    			<label for="organisation">Repository organisation</label>
    			<input type="text" class="form-control"
					   id="organisation" name="organisation"
					   placeholder="Enter organisation name">
  			</div>

			<div class="form-group">
    			<label for="name">Repository name</label>
    			<input type="text" class="form-control"
					   id="name" name="name"
					   placeholder="Enter repository name">
  			</div>


			<div class="form-group">
    			<label for="type">Select repository type</label>
    			<select class="form-control" id="type">
      				<option>GitHub</option>
      				<option>GitLab</option>
					<option>Bitbucket</option>

		    	</select>
			</div>

			<button type="submit" class="btn btn-primary">Subscribe repository</button>
		</form>

	{% else %}

		<h1>All of your subscribed repositories</h1>
		<div class="container">
			{% for i in range(repositories|length) %}
				<table class="table table-striped">
					<thead>
						<tr>
							<td>Branch name</td>
							<td>User</td>
							<td>Date</td>
							<td>Commit url</td>
							<td>Commit</td>
							<td>Protected</td>
							<td>Url:</td>
						</tr>
					</thead>

					<tbody>
						{% for branch in repositories[i].branches %}
						<tr>
							<td>{{ branch.name }}</td>
							<td>{{ branch.author }}</td>
							<td>{{ session['username'] }}</td>
							<td>{{ branch.html_url }}</td>
							<td>{{ branch.commits }}</td>
							<td>{{ branch.protected }}</td>
							<td>{{ branch.url }}</td>
						</tr>
						{% endfor %}
					</tbody>

				</table>
			{% endfor %}
		</div>
	{% endif %}
{% endblock %}